{
      "id": "sp-payment",
      "title": "SP 2: Thanh To√°n",
      "type": "Stored Procedure",
      "shortDesc": "Stored Procedure x·ª≠ l√Ω thanh to√°n cho booking",
      "mdFile": "StoreProcedure/Demo_Payment/problem.html",
      "sqlFile": "StoreProcedure/Demo_Payment/sp_Payment.sql",
      "tables": [
            "PAYMENTS",
            "DATPHONG"
      ],
      "separateTables": [
            {
                  "name": "PAYMENTS",
                  "label": "üí∞ B·∫£ng Thanh To√°n",
                  "sqlBefore": "SELECT id, booking_id, so_tien AS amount, method, trang_thai FROM PAYMENTS WHERE booking_id = @BookingID",
                  "sqlAfter": "SELECT id, booking_id, so_tien AS amount, method, trang_thai FROM PAYMENTS WHERE booking_id = @BookingID",
                  "columns": [
                        {
                              "key": "id",
                              "label": "Payment ID",
                              "isPk": true
                        },
                        {
                              "key": "booking_id",
                              "label": "Booking ID"
                        },
                        {
                              "key": "amount",
                              "label": "‚ö° S·ªë Ti·ªÅn"
                        },
                        {
                              "key": "method",
                              "label": "‚ö° Ph∆∞∆°ng Th·ª©c"
                        },
                        {
                              "key": "trang_thai",
                              "label": "Tr·∫°ng Th√°i"
                        }
                  ]
            },
            {
                  "name": "DATPHONG",
                  "label": "üìã B·∫£ng ƒê·∫∑t Ph√≤ng",
                  "sqlBefore": "SELECT id, user_id, trang_thai FROM DATPHONG WHERE id = @BookingID",
                  "sqlAfter": "SELECT id, user_id, trang_thai FROM DATPHONG WHERE id = @BookingID",
                  "columns": [
                        {
                              "key": "id",
                              "label": "Booking ID",
                              "isPk": true
                        },
                        {
                              "key": "user_id",
                              "label": "User ID"
                        },
                        {
                              "key": "trang_thai",
                              "label": "‚ö° Tr·∫°ng Th√°i"
                        }
                  ]
            }
      ],
      "sqlFetchInitial": "SELECT TOP 20 p.id, p.booking_id, p.so_tien AS amount, p.phuong_thuc AS method, p.trang_thai AS status, d.trang_thai FROM PAYMENTS p LEFT JOIN DATPHONG d ON d.id = p.booking_id ORDER BY p.created_at DESC",
      "sqlFetchBefore": "SELECT p.id, p.booking_id, p.so_tien AS amount, p.trang_thai FROM PAYMENTS p WHERE p.booking_id = @BookingID",
      "sqlFetchAfter": "SELECT p.id, p.booking_id, p.so_tien AS amount, p.trang_thai FROM PAYMENTS p WHERE p.booking_id = @BookingID",
      "columns": [
            {
                  "key": "id",
                  "label": "Payment ID",
                  "isPk": true
            },
            {
                  "key": "booking_id",
                  "label": "Booking ID"
            },
            {
                  "key": "amount",
                  "label": "S·ªë Ti·ªÅn"
            },
            {
                  "key": "method",
                  "label": "Ph∆∞∆°ng Th·ª©c"
            },
            {
                  "key": "status",
                  "label": "Tr·∫°ng Th√°i"
            },
            {
                  "key": "trang_thai",
                  "label": "Tr·∫°ng Th√°i Booking"
            }
      ],
      "params": [
            {
                  "name": "@BookingId",
                  "type": "int",
                  "defaultValue": 1
            },
            {
                  "name": "@UserId",
                  "type": "int",
                  "defaultValue": 1
            },
            {
                  "name": "@SoTien",
                  "type": "decimal",
                  "defaultValue": 500000
            },
            {
                  "name": "@PhuongThuc",
                  "type": "string",
                  "defaultValue": "TIEN_MAT"
            }
      ],
      "mockData": {
            "before": [],
            "after": [
                  {
                        "id": 1,
                        "booking_id": 1,
                        "amount": 1000000,
                        "method": "CASH",
                        "status": "COMPLETED"
                  }
            ]
      }
}