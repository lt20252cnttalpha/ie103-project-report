{
      "id": "sp-booking-room",
      "title": "SP 1: ƒê·∫∑t Ph√≤ng",
      "type": "Stored Procedure",
      "shortDesc": "Stored Procedure ƒë·ªÉ t·∫°o booking m·ªõi v√† th√™m chi ti·∫øt ph√≤ng",
      "mdFile": "StoreProcedure/Demo_BookingRoom/sp_BookingRoom.html",
      "sqlFile": "StoreProcedure/Demo_BookingRoom/sp_BookingRoom.sql",
      "tables": [
            "DATPHONG",
            "CT_DATPHONG",
            "PHONG"
      ],
      "separateTables": [
            {
                  "name": "DATPHONG",
                  "label": "üìã B·∫£ng ƒê·∫∑t Ph√≤ng",
                  "sqlBefore": "SELECT id, user_id, check_in, check_out, trang_thai FROM DATPHONG WHERE user_id = @UserID ORDER BY created_at DESC",
                  "sqlAfter": "SELECT id, user_id, check_in, check_out, trang_thai FROM DATPHONG WHERE user_id = @UserID ORDER BY created_at DESC",
                  "columns": [
                        {
                              "key": "id",
                              "label": "Booking ID",
                              "isPk": true
                        },
                        {
                              "key": "user_id",
                              "label": "User ID"
                        },
                        {
                              "key": "check_in",
                              "label": "‚ö° Check In"
                        },
                        {
                              "key": "check_out",
                              "label": "‚ö° Check Out"
                        },
                        {
                              "key": "trang_thai",
                              "label": "Tr·∫°ng Th√°i"
                        }
                  ]
            },
            {
                  "name": "CT_DATPHONG",
                  "label": "üè® Chi Ti·∫øt ƒê·∫∑t Ph√≤ng",
                  "sqlBefore": "SELECT ct.id, ct.datphong_id, ct.phong_id, p.so_phong AS ten_phong, ct.don_gia FROM CT_DATPHONG ct LEFT JOIN PHONG p ON p.id = ct.phong_id WHERE ct.datphong_id IN (SELECT id FROM DATPHONG WHERE user_id = @UserID)",
                  "sqlAfter": "SELECT ct.id, ct.datphong_id, ct.phong_id, p.so_phong AS ten_phong, ct.don_gia FROM CT_DATPHONG ct LEFT JOIN PHONG p ON p.id = ct.phong_id WHERE ct.datphong_id IN (SELECT id FROM DATPHONG WHERE user_id = @UserID)",
                  "columns": [
                        {
                              "key": "id",
                              "label": "ID",
                              "isPk": true
                        },
                        {
                              "key": "datphong_id",
                              "label": "Booking ID"
                        },
                        {
                              "key": "phong_id",
                              "label": "‚ö° Ph√≤ng ID"
                        },
                        {
                              "key": "ten_phong",
                              "label": "T√™n Ph√≤ng"
                        },
                        {
                              "key": "don_gia",
                              "label": "ƒê∆°n Gi√°"
                        }
                  ]
            }
      ],
      "sqlFetchInitial": "SELECT TOP 20 dp.id, dp.user_id, dp.check_in, dp.check_out, dp.trang_thai, ct.phong_id, ct.don_gia FROM DATPHONG dp LEFT JOIN CT_DATPHONG ct ON ct.datphong_id = dp.id ORDER BY dp.created_at DESC",
      "sqlFetchBefore": "SELECT dp.id, dp.user_id, dp.check_in, dp.check_out, dp.trang_thai FROM DATPHONG dp WHERE dp.user_id = @UserID ORDER BY dp.created_at DESC",
      "sqlFetchAfter": "SELECT dp.id, dp.user_id, dp.check_in, dp.check_out, dp.trang_thai, ct.phong_id, ct.don_gia FROM DATPHONG dp LEFT JOIN CT_DATPHONG ct ON ct.datphong_id = dp.id WHERE dp.user_id = @UserID ORDER BY dp.created_at DESC",
      "columns": [
            {
                  "key": "id",
                  "label": "Booking ID",
                  "isPk": true
            },
            {
                  "key": "user_id",
                  "label": "User ID"
            },
            {
                  "key": "phong_id",
                  "label": "Ph√≤ng ID"
            },
            {
                  "key": "check_in",
                  "label": "Check In"
            },
            {
                  "key": "check_out",
                  "label": "Check Out"
            },
            {
                  "key": "don_gia",
                  "label": "ƒê∆°n Gi√°"
            },
            {
                  "key": "trang_thai",
                  "label": "Tr·∫°ng Th√°i"
            }
      ],
      "params": [
            {
                  "name": "@UserId",
                  "type": "int",
                  "defaultValue": 1
            },
            {
                  "name": "@SoPhong",
                  "type": "nvarchar",
                  "defaultValue": "101"
            },
            {
                  "name": "@CheckIn",
                  "type": "datetime",
                  "defaultValue": "2026-01-20T22:00:00"
            },
            {
                  "name": "@CheckOut",
                  "type": "datetime",
                  "defaultValue": "2026-01-25 12:00"
            }
      ],
      "mockData": {
            "before": [],
            "after": [
                  {
                        "id": 1,
                        "user_id": 1,
                        "check_in": "2026-01-20T14:00:00",
                        "check_out": "2026-01-25T12:00:00",
                        "trang_thai": "PENDING"
                  }
            ]
      }
}